# db

## Files

**Directory Stats:** 4 files, 260 lines, 1,827 tokens

| File | Lines | Tokens |
|------|------:|-------:|
| `__init__.py` | 18 | 91 |
| `base.py` | 9 | 36 |
| `models.py` | 144 | 1,251 |
| `session.py` | 89 | 449 |

### __init__.py
*18 lines, 91 tokens*

- **Class**: `Base` - SQLAlchemy declarative base for all database models.
- **Class**: `Repository` - Database model representing a code repository.
- **Class**: `Task` - Database model for tracking asynchronous tasks.
- **Class**: `AgentRun` - Database model tracking executions of autonomous agents.
- **Class**: `ChatSession` - Database model managing individual user chat sessions.
- **Class**: `ChatMessage` - Database model storing messages within a chat session.
- **Function**: `get_db` - Dependency utility for obtaining database session instances.
- **Function**: `get_engine` - Utility function to retrieve the SQLAlchemy engine.
- **Class**: `SessionLocal` - Factory class for creating new database session objects.

### base.py
*9 lines, 36 tokens*

- **Class**: `Base` - Base class for all application ORM models.

### models.py
*144 lines, 1,251 tokens*

- **Function**: `generate_uuid` - Generates a new UUID string for database records.
- **Class**: `Repository` - Database model for managing cloned GitHub repositories.
- **Class**: `Task` - Record of specific task execution and its status.
- **Class**: `AgentRun` - Logs individual agent performance and token consumption.
- **Class**: `ChatSession` - Groups interactive chat messages for a specific context.
- **Class**: `ChatMessage` - Stores individual messages within a chat session.

### session.py
*89 lines, 449 tokens*

- **Function**: `get_engine` - Configures and returns the SQLAlchemy database engine.
- **Function**: `get_session_local` - Configures and returns the SQLAlchemy session factory.
- **Function**: `get_db` - Yields a database session for use in dependencies.
- **Function**: `init_db` - Creates all defined database tables.
- **Function**: `drop_db` - Removes all tables from the database.
- **Constant**: `_engine` - Internal cache for the database engine instance.
- **Constant**: `_SessionLocal` - Internal cache for the sessionmaker instance.
- **Constant**: `SessionLocal` - Property-based alias for the session factory.

---
*Generated by TurboWrap - 2025-12-24 15:29*