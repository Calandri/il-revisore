# db

## Files

**Directory Stats:** 4 files, 260 lines, 1,827 tokens

| File | Lines | Tokens |
|------|------:|-------:|
| `__init__.py` | 18 | 91 |
| `base.py` | 9 | 36 |
| `models.py` | 144 | 1,251 |
| `session.py` | 89 | 449 |

### __init__.py
*18 lines, 91 tokens*

- **Class**: `Base` - Base class for all database models.
- **Class**: `Repository` - Database model representing a code repository.
- **Class**: `Task` - Database model representing an execution task.
- **Class**: `AgentRun` - Database model tracking agent execution history.
- **Class**: `ChatSession` - Database model managing user chat sessions.
- **Class**: `ChatMessage` - Database model storing individual chat messages.
- **Function**: `get_db` - Generator providing database session instances.
- **Function**: `get_engine` - Retrieves the SQLAlchemy database engine instance.
- **Class**: `SessionLocal` - Factory for creating new database sessions.
- **Constant**: `__all__` - Defines public exports for the database module.

### base.py
*9 lines, 36 tokens*

- **Class**: `Base` - Base class for all SQLAlchemy ORM models.

### models.py
*144 lines, 1,251 tokens*

- **Function**: `generate_uuid` - Generates a new UUID string for database records.
- **Class**: `Repository` - Database model for cloned GitHub repositories and metadata.
- **Class**: `Task` - Database model for tracking background task execution records.
- **Class**: `AgentRun` - Records individual AI agent execution details and metrics.
- **Class**: `ChatSession` - Manages interactive conversation sessions for repositories.
- **Class**: `ChatMessage` - Stores individual messages and roles within a session.

### session.py
*89 lines, 449 tokens*

- **Function**: `get_engine` - Configures and returns the SQLAlchemy database engine.
- **Function**: `get_session_local` - Returns the cached SQLAlchemy session factory.
- **Function**: `get_db` - Generator providing database sessions for dependency injection.
- **Function**: `init_db` - Creates all tables in the database schema.
- **Function**: `drop_db` - Removes all tables from the database schema.
- **Constant**: `_engine` - Private module-level cache for the database engine.
- **Constant**: `_SessionLocal` - Private module-level cache for the session factory.
- **Constant**: `SessionLocal` - Property alias for accessing the session factory.

---
*Generated by TurboWrap - 2025-12-24 15:47*