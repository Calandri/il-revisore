(function(S,a){typeof exports=="object"&&typeof module<"u"?a(exports,require("react")):typeof define=="function"&&define.amd?define(["exports","react"],a):(S=typeof globalThis<"u"?globalThis:S||self,a(S.TurboWrapChat={},S.React))})(this,function(S,a){"use strict";var Er=Object.defineProperty;var Sr=(S,a,L)=>a in S?Er(S,a,{enumerable:!0,configurable:!0,writable:!0,value:L}):S[a]=L;var Re=(S,a,L)=>Sr(S,typeof a!="symbol"?a+"":a,L);function L(e){return{id:e.id,cliType:e.cli_type,repositoryId:e.repository_id,currentBranch:e.current_branch,status:e.status,mockupProjectId:e.mockup_project_id,mockupId:e.mockup_id,model:e.model,agentName:e.agent_name,thinkingEnabled:e.thinking_enabled,thinkingBudget:e.thinking_budget,reasoningEnabled:e.reasoning_enabled,mcpServers:e.mcp_servers,claudeSessionId:e.claude_session_id,icon:e.icon,color:e.color,displayName:e.display_name,position:e.position,totalMessages:e.total_messages,totalTokensIn:e.total_tokens_in,totalTokensOut:e.total_tokens_out,createdAt:new Date(e.created_at),updatedAt:new Date(e.updated_at),lastMessageAt:e.last_message_at?new Date(e.last_message_at):null}}function oe(e){return{id:e.id,sessionId:e.session_id,role:e.role,content:e.content,segments:e.segments??void 0,isThinking:e.is_thinking,tokensIn:e.tokens_in??void 0,tokensOut:e.tokens_out??void 0,modelUsed:e.model_used??void 0,agentUsed:e.agent_used??void 0,durationMs:e.duration_ms??void 0,createdAt:new Date(e.created_at)}}function W(){return{isStreaming:!1,content:"",segments:[{type:"text",content:""}],activeTools:[],activeAgents:[],pendingMessage:null,error:null}}class ie extends Error{constructor(r,t,n){super(r),this.status=t,this.code=n,this.name="ChatAPIError"}}async function Pe(e,r,t){var d,u;const n=(d=e.body)==null?void 0:d.getReader();if(!n){(u=r.onError)==null||u.call(r,new Error("Response body is not readable"));return}const s=new TextDecoder;let o="",i="",l="chunk";try{for(;;){if(t!=null&&t.aborted)throw new DOMException("Aborted","AbortError");const{done:c,value:g}=await n.read();if(c)break;o+=s.decode(g,{stream:!0});const f=o.split(`
`);o=f.pop()||"";for(const m of f)if(m.trim()){if(m.startsWith("event: "))l=m.slice(7).trim(),i="";else if(m.startsWith("data: ")){i+=m.slice(6);try{const v=JSON.parse(i);Oe(l,v,r),l="chunk",i=""}catch{}}}}}finally{n.releaseLock()}}function Oe(e,r,t){var n,s,o,i,l,d,u,c,g,f,m;switch(e){case"start":typeof r.session_id=="string"&&((n=t.onStart)==null||n.call(t,r.session_id));break;case"chunk":typeof r.content=="string"&&((s=t.onChunk)==null||s.call(t,r.content,typeof r.fullContent=="string"?r.fullContent:void 0));break;case"thinking":typeof r.content=="string"&&((o=t.onThinking)==null||o.call(t,r.content));break;case"tool_start":{if(typeof r.tool_name!="string"||typeof r.tool_id!="string")break;const v={name:r.tool_name,id:r.tool_id,startedAt:Date.now()};(i=t.onToolStart)==null||i.call(t,v);break}case"tool_end":typeof r.tool_name=="string"&&((l=t.onToolEnd)==null||l.call(t,r.tool_name,typeof r.tool_input=="object"&&r.tool_input!==null?r.tool_input:void 0));break;case"agent_start":{if(typeof r.agent_type!="string"||typeof r.agent_model!="string"||typeof r.description!="string")break;const v={type:r.agent_type,model:r.agent_model,description:r.description,startedAt:Date.now()};(d=t.onAgentStart)==null||d.call(t,v);break}case"done":typeof r.message_id=="string"&&typeof r.total_length=="number"&&((u=t.onDone)==null||u.call(t,r.message_id,r.total_length));break;case"title_updated":typeof r.title=="string"&&((c=t.onTitleUpdate)==null||c.call(t,r.title));break;case"action":(r.type==="navigate"||r.type==="highlight")&&typeof r.target=="string"&&((g=t.onAction)==null||g.call(t,{type:r.type,target:r.target}));break;case"usage":typeof r.input_tokens=="number"&&typeof r.output_tokens=="number"&&((f=t.onUsage)==null||f.call(t,{inputTokens:r.input_tokens,outputTokens:r.output_tokens,cacheReadInputTokens:typeof r.cache_read_input_tokens=="number"?r.cache_read_input_tokens:void 0,cacheCreationInputTokens:typeof r.cache_creation_input_tokens=="number"?r.cache_creation_input_tokens:void 0}));break;case"error":typeof r.error=="string"&&((m=t.onError)==null||m.call(t,new Error(r.error)));break}}class le{constructor(r){Re(this,"config");this.config={timeout:12e4,...r,baseUrl:r.baseUrl.replace(/\/$/,"")}}async getHeaders(){var t,n;const r={"Content-Type":"application/json",...this.config.headers};if(this.config.getAuthToken)try{const s=await this.config.getAuthToken();s&&(r.Authorization=`Bearer ${s}`)}catch(s){console.error("Failed to get auth token:",s),(n=(t=this.config).onError)==null||n.call(t,s instanceof Error?s:new Error("Failed to get auth token"))}return r}async handleError(r){var t,n,s,o,i,l;r.status===401&&((n=(t=this.config).onUnauthorized)==null||n.call(t));try{const d=await r.json(),u=new ie(d.detail||d.message||`HTTP ${r.status}`,r.status,d.error_type);return(o=(s=this.config).onError)==null||o.call(s,u),u}catch{const d=new ie(`HTTP ${r.status}: ${r.statusText}`,r.status);return(l=(i=this.config).onError)==null||l.call(i,d),d}}async fetch(r,t={}){const n=`${this.config.baseUrl}${r}`,s=await this.getHeaders(),o=new AbortController,i=setTimeout(()=>o.abort(),this.config.timeout);try{const l=await fetch(n,{...t,headers:{...s,...t.headers},signal:t.signal||o.signal});if(!l.ok)throw await this.handleError(l);return l.json()}finally{clearTimeout(i)}}async getSessions(r){const t=new URLSearchParams;r!=null&&r.repositoryId&&t.set("repository_id",r.repositoryId),r!=null&&r.cliType&&t.set("cli_type",r.cliType),r!=null&&r.limit&&t.set("limit",r.limit.toString());const n=t.toString(),s=`/api/cli-chat/sessions${n?`?${n}`:""}`;return(await this.fetch(s)).map(L)}async createSession(r){const t=await this.fetch("/api/cli-chat/sessions",{method:"POST",body:JSON.stringify({cli_type:r.cliType,repository_id:r.repositoryId,display_name:r.displayName,icon:r.icon,color:r.color,mockup_project_id:r.mockupProjectId,mockup_id:r.mockupId})});return L(t)}async getSession(r){const t=await this.fetch(`/api/cli-chat/sessions/${r}`);return L(t)}async updateSession(r,t){const n=await this.fetch(`/api/cli-chat/sessions/${r}`,{method:"PUT",body:JSON.stringify({display_name:t.displayName,icon:t.icon,color:t.color,position:t.position,model:t.model,agent_name:t.agentName,thinking_enabled:t.thinkingEnabled,thinking_budget:t.thinkingBudget,reasoning_enabled:t.reasoningEnabled,mcp_servers:t.mcpServers,mockup_project_id:t.mockupProjectId,mockup_id:t.mockupId})});return L(n)}async deleteSession(r){await this.fetch(`/api/cli-chat/sessions/${r}`,{method:"DELETE"})}async startSession(r){return this.fetch(`/api/cli-chat/sessions/${r}/start`,{method:"POST"})}async stopSession(r){return this.fetch(`/api/cli-chat/sessions/${r}/stop`,{method:"POST"})}async forkSession(r){const t=await this.fetch(`/api/cli-chat/sessions/${r}/fork`,{method:"POST"});return L(t)}async getBranches(r){return this.fetch(`/api/cli-chat/sessions/${r}/branches`)}async changeBranch(r,t){const n=await this.fetch(`/api/cli-chat/sessions/${r}/branch`,{method:"POST",body:JSON.stringify({branch:t})});return L(n)}async getMessages(r,t){const n=new URLSearchParams;t!=null&&t.limit&&n.set("limit",t.limit.toString()),t!=null&&t.includeThinking&&n.set("include_thinking","true");const s=n.toString(),o=`/api/cli-chat/sessions/${r}/messages${s?`?${s}`:""}`;return(await this.fetch(o)).map(oe)}async streamMessage(r,t,n={}){var i;const s=await this.getHeaders(),o=await fetch(`${this.config.baseUrl}/api/cli-chat/sessions/${r}/message`,{method:"POST",headers:s,body:JSON.stringify({content:t,model_override:n.modelOverride}),signal:n.signal});if(!o.ok){const l=await this.handleError(o);(i=n.onError)==null||i.call(n,l);return}await Pe(o,n,n.signal)}async getContextInfo(r){const t=await this.fetch(`/api/cli-chat/sessions/${r}/context`);return{model:t.model,tokens:{used:t.tokens_in||0,limit:2e5,percentage:(t.tokens_in||0)/2e5*100},categories:t.categories||[],mcpTools:t.mcpTools||[],agents:t.agents||[]}}async getUsageInfo(r){const t=await this.fetch(`/api/cli-chat/sessions/${r}/usage`);return{version:t.version,sessionId:t.session_id,cwd:t.cwd,loginMethod:t.login_method,organization:t.organization,email:t.email,model:t.model,modelId:t.model_id,ide:t.ide,ideVersion:t.ide_version,mcpServers:t.mcp_servers||[],memory:t.memory,settingSources:t.setting_sources}}async getAgents(){return(await this.fetch("/api/cli-chat/agents")).agents}async getAgent(r){return this.fetch(`/api/cli-chat/agents/${r}`)}async getSlashCommand(r){return this.fetch(`/api/cli-chat/commands/${r}`)}async getSlashCommands(){return this.fetch("/api/cli-chat/commands")}async getRepositories(){return this.fetch("/api/git/repositories")}}const ce=a.createContext(null);function H(){const e=a.useContext(ce);if(!e)throw new Error("useChatClient must be used within a ChatProvider");return e}const ze={},de=e=>{let r;const t=new Set,n=(c,g)=>{const f=typeof c=="function"?c(r):c;if(!Object.is(f,r)){const m=r;r=g??(typeof f!="object"||f===null)?f:Object.assign({},r,f),t.forEach(v=>v(r,m))}},s=()=>r,d={setState:n,getState:s,getInitialState:()=>u,subscribe:c=>(t.add(c),()=>t.delete(c)),destroy:()=>{(ze?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),t.clear()}},u=r=e(n,s,d);return d},We=e=>e?de(e):de;function Ue(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ue={exports:{}},me={},ge={exports:{}},fe={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U=a;function Be(e,r){return e===r&&(e!==0||1/e===1/r)||e!==e&&r!==r}var He=typeof Object.is=="function"?Object.is:Be,Fe=U.useState,Ve=U.useEffect,Ge=U.useLayoutEffect,qe=U.useDebugValue;function Je(e,r){var t=r(),n=Fe({inst:{value:t,getSnapshot:r}}),s=n[0].inst,o=n[1];return Ge(function(){s.value=t,s.getSnapshot=r,J(s)&&o({inst:s})},[e,t,r]),Ve(function(){return J(s)&&o({inst:s}),e(function(){J(s)&&o({inst:s})})},[e]),qe(t),t}function J(e){var r=e.getSnapshot;e=e.value;try{var t=r();return!He(e,t)}catch{return!0}}function Ke(e,r){return r()}var Qe=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Ke:Je;fe.useSyncExternalStore=U.useSyncExternalStore!==void 0?U.useSyncExternalStore:Qe,ge.exports=fe;var Ye=ge.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F=a,Xe=Ye;function Ze(e,r){return e===r&&(e!==0||1/e===1/r)||e!==e&&r!==r}var $e=typeof Object.is=="function"?Object.is:Ze,et=Xe.useSyncExternalStore,tt=F.useRef,rt=F.useEffect,nt=F.useMemo,at=F.useDebugValue;me.useSyncExternalStoreWithSelector=function(e,r,t,n,s){var o=tt(null);if(o.current===null){var i={hasValue:!1,value:null};o.current=i}else i=o.current;o=nt(function(){function d(m){if(!u){if(u=!0,c=m,m=n(m),s!==void 0&&i.hasValue){var v=i.value;if(s(v,m))return g=v}return g=m}if(v=g,$e(c,m))return v;var y=n(m);return s!==void 0&&s(v,y)?(c=m,v):(c=m,g=y)}var u=!1,c,g,f=t===void 0?null:t;return[function(){return d(r())},f===null?void 0:function(){return d(f())}]},[r,t,n,s]);var l=et(e,o[0],o[1]);return rt(function(){i.hasValue=!0,i.value=l},[l]),at(l),l},ue.exports=me;var st=ue.exports;const ot=Ue(st),pe={},{useDebugValue:it}=a,{useSyncExternalStoreWithSelector:lt}=ot;let he=!1;const ct=e=>e;function dt(e,r=ct,t){(pe?"production":void 0)!=="production"&&t&&!he&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),he=!0);const n=lt(e.subscribe,e.getState,e.getServerState||e.getInitialState,r,t);return it(n),n}const ut=e=>{(pe?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const r=typeof e=="function"?We(e):e,t=(n,s)=>dt(r,n,s);return Object.assign(t,r),t},mt=e=>ut,K={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},Q=new Map,V=e=>{const r=Q.get(e);return r?Object.fromEntries(Object.entries(r.stores).map(([t,n])=>[t,n.getState()])):{}},gt=(e,r,t)=>{if(e===void 0)return{type:"untracked",connection:r.connect(t)};const n=Q.get(t.name);if(n)return{type:"tracked",store:e,...n};const s={connection:r.connect(t),stores:{}};return Q.set(t.name,s),{type:"tracked",store:e,...s}},ft=(e,r={})=>(t,n,s)=>{const{enabled:o,anonymousActionType:i,store:l,...d}=r;let u;try{u=(o??(K?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!u)return(K?"production":void 0)!=="production"&&o&&console.warn("[zustand devtools middleware] Please install/enable Redux devtools extension"),e(t,n,s);const{connection:c,...g}=gt(l,u,d);let f=!0;s.setState=(y,k,p)=>{const h=t(y,k);if(!f)return h;const E=p===void 0?{type:i||"anonymous"}:typeof p=="string"?{type:p}:p;return l===void 0?(c==null||c.send(E,n()),h):(c==null||c.send({...E,type:`${l}/${E.type}`},{...V(d.name),[l]:s.getState()}),h)};const m=(...y)=>{const k=f;f=!1,t(...y),f=k},v=e(s.setState,n,s);if(g.type==="untracked"?c==null||c.init(v):(g.stores[g.store]=s,c==null||c.init(Object.fromEntries(Object.entries(g.stores).map(([y,k])=>[y,y===g.store?v:k.getState()])))),s.dispatchFromDevtools&&typeof s.dispatch=="function"){let y=!1;const k=s.dispatch;s.dispatch=(...p)=>{(K?"production":void 0)!=="production"&&p[0].type==="__setState"&&!y&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),y=!0),k(...p)}}return c.subscribe(y=>{var k;switch(y.type){case"ACTION":if(typeof y.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return Y(y.payload,p=>{if(p.type==="__setState"){if(l===void 0){m(p.state);return}Object.keys(p.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format.
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const h=p.state[l];if(h==null)return;JSON.stringify(s.getState())!==JSON.stringify(h)&&m(h);return}s.dispatchFromDevtools&&typeof s.dispatch=="function"&&s.dispatch(p)});case"DISPATCH":switch(y.payload.type){case"RESET":return m(v),l===void 0?c==null?void 0:c.init(s.getState()):c==null?void 0:c.init(V(d.name));case"COMMIT":if(l===void 0){c==null||c.init(s.getState());return}return c==null?void 0:c.init(V(d.name));case"ROLLBACK":return Y(y.state,p=>{if(l===void 0){m(p),c==null||c.init(s.getState());return}m(p[l]),c==null||c.init(V(d.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return Y(y.state,p=>{if(l===void 0){m(p);return}JSON.stringify(s.getState())!==JSON.stringify(p[l])&&m(p[l])});case"IMPORT_STATE":{const{nextLiftedState:p}=y.payload,h=(k=p.computedStates.slice(-1)[0])==null?void 0:k.state;if(!h)return;m(l===void 0?h:h[l]),c==null||c.send(null,p);return}case"PAUSE_RECORDING":return f=!f}return}}),v},Y=(e,r)=>{let t;try{t=JSON.parse(e)}catch(n){console.error("[zustand devtools middleware] Could not parse the received json",n)}t!==void 0&&r(t)},pt=e=>(r,t,n)=>{const s=n.subscribe;return n.subscribe=(i,l,d)=>{let u=i;if(l){const c=(d==null?void 0:d.equalityFn)||Object.is;let g=i(n.getState());u=f=>{const m=i(f);if(!c(g,m)){const v=g;l(g=m,v)}},d!=null&&d.fireImmediately&&l(g,g)}return s(u)},e(r,t,n)},ye={sessions:new Map,activeSessionId:null,secondarySessionId:null,messages:new Map,streamState:new Map,agents:[],isInitialized:!1,chatMode:"third",dualChatEnabled:!1,showHistory:!1,showSettings:!1,activePane:"left"},_=mt()(ft(pt((e,r)=>({...ye,actions:{setActiveSession:t=>{e({activeSessionId:t},!1,"setActiveSession")},setSecondarySession:t=>{e({secondarySessionId:t},!1,"setSecondarySession")},addSession:t=>{e(n=>{const s=new Map(n.sessions);s.set(t.id,t);const o=new Map(n.messages);o.set(t.id,[]);const i=new Map(n.streamState);return i.set(t.id,W()),{sessions:s,messages:o,streamState:i}},!1,"addSession")},updateSession:(t,n)=>{e(s=>{const o=new Map(s.sessions),i=o.get(t);return i&&o.set(t,{...i,...n}),{sessions:o}},!1,"updateSession")},removeSession:t=>{e(n=>{const s=new Map(n.sessions);s.delete(t);const o=new Map(n.messages);o.delete(t);const i=new Map(n.streamState);i.delete(t);const l=n.activeSessionId===t?null:n.activeSessionId,d=n.secondarySessionId===t?null:n.secondarySessionId;return{sessions:s,messages:o,streamState:i,activeSessionId:l,secondarySessionId:d}},!1,"removeSession")},setSessions:t=>{e(n=>{const s=new Map,o=new Map(n.messages),i=new Map(n.streamState);for(const l of t)s.set(l.id,l),o.has(l.id)||o.set(l.id,[]),i.has(l.id)||i.set(l.id,W());return{sessions:s,messages:o,streamState:i}},!1,"setSessions")},addMessage:(t,n)=>{e(s=>{const o=new Map(s.messages),i=[...o.get(t)||[],n];return o.set(t,i),{messages:o}},!1,"addMessage")},updateMessage:(t,n,s)=>{e(o=>{const i=new Map(o.messages),d=(i.get(t)||[]).map(u=>u.id===n?{...u,...s}:u);return i.set(t,d),{messages:i}},!1,"updateMessage")},setMessages:(t,n)=>{e(s=>{const o=new Map(s.messages);return o.set(t,n),{messages:o}},!1,"setMessages")},clearMessages:t=>{e(n=>{const s=new Map(n.messages);return s.set(t,[]),{messages:s}},!1,"clearMessages")},startStream:t=>{e(n=>{const s=new Map(n.streamState);return s.set(t,{...W(),isStreaming:!0}),{streamState:s}},!1,"startStream")},appendStreamContent:(t,n,s)=>{e(o=>{var g;const i=new Map(o.streamState),l=i.get(t);if(!l)return o;const d=s!==void 0?s:l.content+n,u=[...l.segments],c=u[u.length-1];if((c==null?void 0:c.type)==="text"){const f=s!==void 0?s.slice(((g=c.content)==null?void 0:g.length)||0):n;u[u.length-1]={...c,content:(c.content||"")+f}}return i.set(t,{...l,content:d,segments:u}),{streamState:i}},!1,"appendStreamContent")},addStreamSegment:(t,n)=>{e(s=>{const o=new Map(s.streamState),i=o.get(t);if(!i)return s;const l=[...i.segments,n];return n.type!=="text"&&l.push({type:"text",content:""}),o.set(t,{...i,segments:l}),{streamState:o}},!1,"addStreamSegment")},endStream:(t,n)=>{e(s=>{const o=new Map(s.streamState),i=o.get(t);if(o.set(t,{...W(),pendingMessage:(i==null?void 0:i.pendingMessage)||null}),n){const l=new Map(s.messages),d=[...l.get(t)||[],n];return l.set(t,d),{streamState:o,messages:l}}return{streamState:o}},!1,"endStream")},abortStream:t=>{e(n=>{const s=new Map(n.streamState);return s.set(t,W()),{streamState:s}},!1,"abortStream")},setStreamError:(t,n)=>{e(s=>{const o=new Map(s.streamState),i=o.get(t);return i&&o.set(t,{...i,isStreaming:!1,error:n}),{streamState:o}},!1,"setStreamError")},addActiveTool:(t,n)=>{e(s=>{const o=new Map(s.streamState),i=o.get(t);return i&&o.set(t,{...i,activeTools:[...i.activeTools,n]}),{streamState:o}},!1,"addActiveTool")},removeActiveTool:(t,n,s)=>{e(o=>{const i=new Map(o.streamState),l=i.get(t);if(l){const d=l.activeTools.filter(c=>c.name!==n),u=l.segments.map(c=>c.type==="tool"&&c.name===n&&!c.input?{...c,input:s,completedAt:Date.now()}:c);i.set(t,{...l,activeTools:d,segments:u})}return{streamState:i}},!1,"removeActiveTool")},addActiveAgent:(t,n)=>{e(s=>{const o=new Map(s.streamState),i=o.get(t);return i&&o.set(t,{...i,activeAgents:[...i.activeAgents,n]}),{streamState:o}},!1,"addActiveAgent")},setPendingMessage:(t,n)=>{e(s=>{const o=new Map(s.streamState),i=o.get(t);return i&&o.set(t,{...i,pendingMessage:n}),{streamState:o}},!1,"setPendingMessage")},setAgents:t=>{e({agents:t},!1,"setAgents")},setChatMode:t=>{e({chatMode:t},!1,"setChatMode")},toggleDualChat:()=>{e(t=>({dualChatEnabled:!t.dualChatEnabled}),!1,"toggleDualChat")},toggleHistory:()=>{e(t=>({showHistory:!t.showHistory}),!1,"toggleHistory")},toggleSettings:()=>{e(t=>({showSettings:!t.showSettings}),!1,"toggleSettings")},setActivePane:t=>{e({activePane:t},!1,"setActivePane")},initialize:(t,n)=>{const{actions:s}=r();s.setSessions(t),s.setAgents(n),e({isInitialized:!0},!1,"initialize")},reset:()=>{e(ye,!1,"reset")}}})),{name:"turbowrap-chat"})),G=e=>e.activeSessionId?e.sessions.get(e.activeSessionId)??null:null,X=e=>e.secondarySessionId?e.sessions.get(e.secondarySessionId)??null:null,be=e=>Array.from(e.sessions.values()),Z=e=>e.activeSessionId?e.sessions.has(e.activeSessionId)?e.messages.get(e.activeSessionId)??[]:[]:[],ht=e=>e.secondarySessionId?e.messages.get(e.secondarySessionId)??[]:[],$=e=>e.activeSessionId?e.streamState.get(e.activeSessionId)??null:null,yt=e=>e.secondarySessionId?e.streamState.get(e.secondarySessionId)??null:null,bt=e=>r=>{var t;return((t=r.streamState.get(e))==null?void 0:t.isStreaming)??!1},vt=e=>e.dualChatEnabled&&e.secondarySessionId!==null,Et=e=>e.activePane,ve=e=>e.agents,Ee=a.createContext(null);function St(){const e=a.useContext(Ee);if(!e)throw new Error("useChatContext must be used within a ChatProvider");return e}function Se({config:e,children:r,autoLoadSessions:t=!1,autoLoadAgents:n=!1}){const s=a.useMemo(()=>new le(e),[e]),o=_(),[i,l]=a.useState(o.isInitialized),d=a.useCallback(()=>{l(!0)},[]);a.useEffect(()=>{async function c(){var g;try{const[f,m]=await Promise.all([t?s.getSessions():Promise.resolve([]),n?s.getAgents():Promise.resolve([])]);o.actions.initialize(f,m),l(!0)}catch(f){console.error("[ChatProvider] Failed to initialize:",f),(g=e.onError)==null||g.call(e,f instanceof Error?f:new Error(String(f)))}}(t||n)&&!o.isInitialized&&c()},[s,o,t,n,e]);const u=a.useMemo(()=>({apiClient:s,store:o,isInitialized:i,initialize:d}),[s,o,i,d]);return a.createElement(Ee.Provider,{value:u},a.createElement(ce.Provider,{value:s},r))}function kt(e){const{apiUrl:r,onAction:t,onTitleUpdate:n,onError:s}=e,o=a.useRef(null),i=a.useRef(null),l=a.useRef(null),d=_(),u=a.useCallback(m=>{const v=m.data,{type:y,sessionId:k,data:p}=v;if(!k&&y!=="STATE_SYNC")return;const h=d.actions;switch(y){case"STREAM_START":k&&h.startStream(k);break;case"CHUNK":{const E=p;k&&(E!=null&&E.content)&&h.appendStreamContent(k,E.content);break}case"SYSTEM":break;case"TOOL_START":{const E=p;k&&E&&h.addActiveTool(k,{id:E.tool_id,name:E.tool_name,startedAt:Date.now()});break}case"TOOL_END":{const E=p;k&&E&&h.removeActiveTool(k,E.tool_id||E.tool_name);break}case"AGENT_START":{const E=p;k&&E&&h.addActiveAgent(k,{type:E.agent_type,model:E.agent_model,description:E.description,startedAt:Date.now()});break}case"AGENT_END":break;case"ACTION":{const E=p;E&&(t==null||t(E.type,E.target));break}case"DONE":case"STREAM_END":{k&&h.endStream(k);break}case"STREAM_ABORTED":{k&&h.abortStream(k);break}case"ERROR":{const E=p;k&&h.endStream(k),s==null||s(new Error((E==null?void 0:E.message)||"Stream error"));break}case"TITLE_UPDATE":{const E=p;k&&(E!=null&&E.title)&&(n==null||n(k,E.title),h.updateSession(k,{displayName:E.title}));break}case"STATE_SYNC":{const E=p;E&&Object.entries(E).forEach(([C,A])=>{A.streaming&&(h.startStream(C),A.streamContent&&h.appendStreamContent(C,A.streamContent))});break}}},[d,t,n,s]);a.useEffect(()=>{if(typeof SharedWorker>"u"){console.warn("SharedWorker not supported, falling back to direct fetch");return}try{const m=e.workerUrl||"/static/js/chat-worker.js";o.current=new SharedWorker(m,{name:"turbowrap-chat"}),i.current=o.current.port,i.current.onmessage=u,i.current.start(),i.current.postMessage({type:"GET_STATE"}),l.current=setInterval(()=>{var v;(v=i.current)==null||v.postMessage({type:"PONG"})},3e4)}catch(m){console.error("Failed to connect to SharedWorker:",m),s==null||s(m instanceof Error?m:new Error("Worker connection failed"))}return()=>{var m;l.current&&clearInterval(l.current),(m=i.current)==null||m.close()}},[e.workerUrl,u,s]);const c=a.useCallback((m,v)=>{if(!i.current){s==null||s(new Error("Worker not connected"));return}const y={sessionId:m,content:v,apiUrl:r};i.current.postMessage({type:"SEND_MESSAGE",...y})},[r,s]),g=a.useCallback(m=>{i.current&&(i.current.postMessage({type:"STOP_STREAM",sessionId:m}),d.actions.abortStream(m))},[d]),f=a.useCallback(m=>{i.current&&i.current.postMessage({type:"CLEAR_STATE",sessionId:m})},[]);return{sendMessage:c,stopStream:g,clearState:f,isConnected:!!i.current}}function wt(){return a.createElement("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"}))}function xt(){return a.createElement("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"}))}function Nt(){return a.createElement("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17V7m0 10a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h2a2 2 0 012 2m0 10a2 2 0 002 2h2a2 2 0 002-2M9 7a2 2 0 012-2h2a2 2 0 012 2m0 10V7m0 10a2 2 0 002 2h2a2 2 0 002-2V7a2 2 0 00-2-2h-2a2 2 0 00-2 2"}))}function Ct(){return a.createElement("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"}))}function Mt(){return a.createElement("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}))}function ke({onToggleHistory:e,onToggleDualChat:r,onNewChat:t,onExpand:n,onClose:s,chatMode:o,dualChatEnabled:i=!1,showHistory:l=!1,streamingCount:d=0,className:u="",children:c}){const[g,f]=a.useState(!1);return a.createElement("div",{className:`flex items-center gap-1 px-2 py-1.5 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 ${u}`},a.createElement("button",{onClick:e,className:`p-1.5 rounded hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors ${l?"bg-gray-200 dark:bg-gray-700":""}`,title:"Toggle history"},a.createElement(wt,null)),a.createElement("div",{className:"flex-1 flex items-center gap-1 overflow-x-auto"},c),(o==="full"||o==="page")&&a.createElement("button",{onClick:r,className:`p-1.5 rounded hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors ${i?"bg-indigo-100 dark:bg-indigo-900 text-indigo-600":""}`,title:"Toggle dual chat"},a.createElement(Nt,null)),a.createElement("div",{className:"relative"},a.createElement("button",{onClick:()=>f(!g),disabled:d>=10,className:"p-1.5 rounded hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors disabled:opacity-50",title:"New chat"},a.createElement(xt,null),d>0&&a.createElement("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-amber-500 text-white text-[10px] rounded-full flex items-center justify-center"},d)),g&&a.createElement("div",{className:"absolute right-0 top-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg z-50 py-1 min-w-[140px]"},a.createElement("button",{onClick:()=>{t==null||t("claude"),f(!1)},className:"w-full px-3 py-2 text-left hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2"},a.createElement("span",{className:"w-5 h-5 rounded-full bg-orange-100 text-orange-600 flex items-center justify-center text-xs font-bold"},"C"),"Claude Chat"),a.createElement("button",{onClick:()=>{t==null||t("gemini"),f(!1)},className:"w-full px-3 py-2 text-left hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2"},a.createElement("span",{className:"w-5 h-5 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center text-xs font-bold"},"G"),"Gemini Chat"))),a.createElement("button",{onClick:n,className:"p-1.5 rounded hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",title:"Expand"},a.createElement(Ct,null)),a.createElement("button",{onClick:s,className:"p-1.5 rounded hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",title:"Close"},a.createElement(Mt,null)))}function _t(e){const t=new Date().getTime()-e.getTime(),n=Math.floor(t/6e4);if(n<1)return"now";if(n<60)return`${n}m`;const s=Math.floor(n/60);return s<24?`${s}h`:`${Math.floor(s/24)}d`}function Tt({session:e,isActive:r,isSecondary:t,onSelect:n,onContextMenu:s}){const o=e.lastMessageAt||e.updatedAt;return a.createElement("button",{onClick:n,onContextMenu:s,className:`flex items-center gap-1.5 px-2 py-1 rounded text-sm whitespace-nowrap transition-colors ${r?"bg-white dark:bg-gray-700 shadow-sm":t?"bg-indigo-50 dark:bg-indigo-900/30 ring-1 ring-indigo-300":"hover:bg-gray-200 dark:hover:bg-gray-700"}`},a.createElement("span",{className:`w-4 h-4 rounded-full flex items-center justify-center text-[10px] font-bold ${e.cliType==="gemini"?"bg-blue-100 text-blue-600 dark:bg-blue-900 dark:text-blue-400":"bg-orange-100 text-orange-600 dark:bg-orange-900 dark:text-orange-400"}`},e.cliType==="gemini"?"G":"C"),a.createElement("span",{className:"truncate max-w-[100px]"},e.displayName||"Untitled"),a.createElement("span",{className:"text-xs text-gray-400"},_t(o)))}function we({sessions:e,activeSessionId:r,secondarySessionId:t,onSelect:n,onContextMenu:s,className:o=""}){return e.length===0?null:a.createElement("div",{className:`flex items-center gap-1 overflow-x-auto ${o}`},e.map(i=>a.createElement(Tt,{key:i.id,session:i,isActive:i.id===r,isSecondary:i.id===t,onSelect:()=>n(i.id),onContextMenu:l=>{l.preventDefault(),s==null||s(i.id,l)}})))}function At(e){const r=new Date,t=new Date(r.getFullYear(),r.getMonth(),r.getDate()),n=new Date(e.getFullYear(),e.getMonth(),e.getDate()),s=Math.floor((t.getTime()-n.getTime())/864e5);return s===0?"Today":s===1?"Yesterday":s<7?e.toLocaleDateString("en-US",{weekday:"long"}):e.toLocaleDateString("en-US",{month:"short",day:"numeric"})}function Dt(e){return e?e.includes("opus")?"Opus":e.includes("sonnet")?"Sonnet":e.includes("haiku")?"Haiku":e.includes("pro")?"Pro":e.includes("flash")?"Flash":"":""}function It({session:e,isActive:r,onSelect:t,onDelete:n}){const[s,o]=a.useState(!1);return a.createElement("div",{onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),className:`group flex items-center gap-2 px-3 py-2 rounded-lg cursor-pointer transition-colors ${r?"bg-indigo-50 dark:bg-indigo-900/30":"hover:bg-gray-100 dark:hover:bg-gray-800"}`,onClick:t},a.createElement("span",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold flex-shrink-0 ${e.cliType==="gemini"?"bg-blue-100 text-blue-600 dark:bg-blue-900 dark:text-blue-400":"bg-orange-100 text-orange-600 dark:bg-orange-900 dark:text-orange-400"}`},e.cliType==="gemini"?"G":"C"),a.createElement("div",{className:"flex-1 min-w-0"},a.createElement("div",{className:"flex items-center gap-2"},a.createElement("span",{className:"font-medium truncate"},e.displayName||"Untitled Chat"),e.model&&a.createElement("span",{className:"text-xs text-gray-400"},Dt(e.model))),a.createElement("div",{className:"flex items-center gap-2 text-xs text-gray-400"},a.createElement("span",null,e.totalMessages," messages"))),s&&a.createElement("button",{onClick:i=>{i.stopPropagation(),n()},className:"p-1 rounded hover:bg-red-100 dark:hover:bg-red-900/30 text-gray-400 hover:text-red-500"},a.createElement("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"}))))}function xe({isOpen:e,sessions:r,activeSessionId:t,onClose:n,onSelect:s,onDelete:o,onNewChat:i,className:l=""}){if(!e)return null;const d=r.reduce((u,c)=>{const g=At(c.lastMessageAt||c.updatedAt);return u[g]||(u[g]=[]),u[g].push(c),u},{});return a.createElement(a.Fragment,null,a.createElement("div",{className:"absolute inset-0 bg-black/20 z-40",onClick:n}),a.createElement("div",{className:`absolute left-0 top-0 bottom-0 w-72 bg-white dark:bg-gray-900 border-r border-gray-200 dark:border-gray-700 z-50 flex flex-col animate-slide-in ${l}`},a.createElement("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-200 dark:border-gray-700"},a.createElement("h3",{className:"font-semibold"},"Chat History"),a.createElement("button",{onClick:n,className:"p-1 rounded hover:bg-gray-100 dark:hover:bg-gray-800"},a.createElement("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})))),a.createElement("div",{className:"flex gap-2 px-4 py-3 border-b border-gray-200 dark:border-gray-700"},a.createElement("button",{onClick:()=>i("claude"),className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 rounded-lg bg-orange-50 dark:bg-orange-900/20 text-orange-600 hover:bg-orange-100 dark:hover:bg-orange-900/30 transition-colors"},a.createElement("span",{className:"w-5 h-5 rounded-full bg-orange-100 text-orange-600 flex items-center justify-center text-xs font-bold"},"C"),"Claude"),a.createElement("button",{onClick:()=>i("gemini"),className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 rounded-lg bg-blue-50 dark:bg-blue-900/20 text-blue-600 hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors"},a.createElement("span",{className:"w-5 h-5 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center text-xs font-bold"},"G"),"Gemini")),a.createElement("div",{className:"flex-1 overflow-y-auto chat-scrollbar"},r.length===0?a.createElement("div",{className:"px-4 py-8 text-center text-gray-400"},a.createElement("p",null,"No chat history yet"),a.createElement("p",{className:"text-sm mt-1"},"Start a new chat to begin")):Object.entries(d).map(([u,c])=>a.createElement("div",{key:u,className:"px-2 py-2"},a.createElement("div",{className:"px-2 py-1 text-xs text-gray-400 font-medium"},u),a.createElement("div",{className:"space-y-1"},c.map(g=>a.createElement(It,{key:g.id,session:g,isActive:g.id===t,onSelect:()=>s(g.id),onDelete:()=>o(g.id)}))))))))}function Lt(e){return e==="gemini"?[{value:"gemini-2.0-flash-exp",label:"Flash"},{value:"gemini-exp-1206",label:"Pro"}]:[{value:"opus",label:"Opus"},{value:"sonnet",label:"Sonnet"},{value:"haiku",label:"Haiku"}]}function jt(e){return e?e.includes("opus")?"Opus":e.includes("sonnet")?"Sonnet":e.includes("haiku")?"Haiku":e.includes("flash")?"Flash":e.includes("pro")?"Pro":e.split("-")[0]:"Select"}function ee(){return React.createElement("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"}))}function Rt(){return React.createElement("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))}function Ne({session:e,repository:r,branches:t=[],currentBranch:n,onModelChange:s,onRepoClick:o,onBranchChange:i,onInfoClick:l,className:d=""}){const[u,c]=a.useState(!1),[g,f]=a.useState(!1),m=Lt(e.cliType);return React.createElement("div",{className:`flex items-center gap-2 px-3 py-2 bg-gray-50 dark:bg-gray-800/50 border-b border-gray-200 dark:border-gray-700 text-sm ${d}`},React.createElement("span",{className:`w-5 h-5 rounded-full flex items-center justify-center text-xs font-bold ${e.cliType==="gemini"?"bg-blue-100 text-blue-600 dark:bg-blue-900 dark:text-blue-400":"bg-orange-100 text-orange-600 dark:bg-orange-900 dark:text-orange-400"}`},e.cliType==="gemini"?"G":"C"),React.createElement("div",{className:"relative"},React.createElement("button",{onClick:()=>c(!u),className:"flex items-center gap-1 px-2 py-1 rounded hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors"},React.createElement("span",null,jt(e.model)),React.createElement(ee,null)),u&&React.createElement(React.Fragment,null,React.createElement("div",{className:"fixed inset-0 z-40",onClick:()=>c(!1)}),React.createElement("div",{className:"absolute left-0 top-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg z-50 py-1 min-w-[100px]"},m.map(v=>{var y;return React.createElement("button",{key:v.value,onClick:()=>{s(v.value),c(!1)},className:`w-full px-3 py-1.5 text-left hover:bg-gray-100 dark:hover:bg-gray-700 ${(y=e.model)!=null&&y.includes(v.value.toLowerCase())?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600":""}`},v.label)})))),React.createElement("span",{className:"text-gray-300 dark:text-gray-600"},"|"),React.createElement("button",{onClick:o,className:"flex items-center gap-1 px-2 py-1 rounded hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors truncate max-w-[150px]"},React.createElement("span",{className:"truncate"},(r==null?void 0:r.name)||"Select repo"),React.createElement(ee,null)),r&&t.length>0&&i&&React.createElement("div",{className:"relative"},React.createElement("button",{onClick:()=>f(!g),className:"flex items-center gap-1 px-2 py-1 rounded hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors text-gray-500"},React.createElement("span",{className:"truncate max-w-[100px]"},n||"main"),React.createElement(ee,null)),g&&React.createElement(React.Fragment,null,React.createElement("div",{className:"fixed inset-0 z-40",onClick:()=>f(!1)}),React.createElement("div",{className:"absolute left-0 top-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg z-50 py-1 min-w-[120px] max-h-48 overflow-y-auto"},t.map(v=>React.createElement("button",{key:v,onClick:()=>{i(v),f(!1)},className:`w-full px-3 py-1.5 text-left hover:bg-gray-100 dark:hover:bg-gray-700 truncate ${v===n?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600":""}`},v))))),React.createElement("div",{className:"flex-1"}),React.createElement("button",{onClick:l,className:"p-1 rounded hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors text-gray-500",title:"Session info"},React.createElement(Rt,null)))}function q({content:e,role:r="assistant",className:t=""}){const n=a.useMemo(()=>Pt(e),[e,r]);return React.createElement("div",{className:`message-content prose prose-sm dark:prose-invert max-w-none ${t}`,dangerouslySetInnerHTML:{__html:n}})}function Pt(e,r){if(!e)return"";let t=e;return t=zt(t),t=t.replace(/```(\w+)?\n([\s\S]*?)```/g,(n,s,o)=>{const i=s||"text",l=o.trim();return`<div class="chat-code-block">
        <div class="chat-code-header">
          <span>${i}</span>
          <button class="copy-btn text-xs hover:text-white" onclick="navigator.clipboard.writeText(this.closest('.chat-code-block').querySelector('code').textContent)">Copy</button>
        </div>
        <pre class="chat-code-content"><code class="language-${i}">${l}</code></pre>
      </div>`}),t=t.replace(/`([^`]+)`/g,'<code class="bg-gray-100 dark:bg-gray-800 px-1.5 py-0.5 rounded text-sm font-mono">$1</code>'),t=t.replace(/\[!(INFO|WARNING|ERROR|SUCCESS|TIP)\]\s*\n?([\s\S]*?)(?=\n\n|\n\[!|$)/gi,(n,s,o)=>{const i=s.toLowerCase();return`<div class="chat-callout chat-callout-${i}">
        <span class="mr-2">${{info:"üí°",warning:"‚ö†Ô∏è",error:"‚ùå",success:"‚úÖ",tip:"üí°"}[i]||"üìå"}</span>
        <span>${o.trim()}</span>
      </div>`}),t=t.replace(/^######\s+(.+)$/gm,'<h6 class="text-xs font-semibold mt-3 mb-1">$1</h6>'),t=t.replace(/^#####\s+(.+)$/gm,'<h5 class="text-sm font-semibold mt-3 mb-1">$1</h5>'),t=t.replace(/^####\s+(.+)$/gm,'<h4 class="text-base font-semibold mt-4 mb-2">$1</h4>'),t=t.replace(/^###\s+(.+)$/gm,'<h3 class="text-lg font-bold mt-4 mb-2">$1</h3>'),t=t.replace(/^##\s+(.+)$/gm,'<h2 class="text-xl font-bold mt-5 mb-2 text-indigo-600 dark:text-indigo-400">$1</h2>'),t=t.replace(/^#\s+(.+)$/gm,'<h1 class="text-2xl font-bold mt-6 mb-3 bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent">$1</h1>'),t=t.replace(/\*\*\*(.+?)\*\*\*/g,"<strong><em>$1</em></strong>"),t=t.replace(/\*\*(.+?)\*\*/g,"<strong>$1</strong>"),t=t.replace(/\*(.+?)\*/g,"<em>$1</em>"),t=t.replace(/__(.+?)__/g,"<strong>$1</strong>"),t=t.replace(/_(.+?)_/g,"<em>$1</em>"),t=t.replace(/~~(.+?)~~/g,'<del class="text-gray-500">$1</del>'),t=t.replace(/==(.+?)==/g,'<mark class="bg-yellow-200 dark:bg-yellow-800 px-0.5 rounded">$1</mark>'),t=t.replace(/^---$/gm,'<hr class="my-4 border-gray-300 dark:border-gray-600">'),t=t.replace(/^>\s+(.+)$/gm,'<blockquote class="border-l-4 border-gray-300 dark:border-gray-600 pl-4 italic text-gray-600 dark:text-gray-400">$1</blockquote>'),t=t.replace(/^[-*]\s+(.+)$/gm,'<li class="ml-4">$1</li>'),t=t.replace(/(<li.*<\/li>\n?)+/g,'<ul class="list-disc list-inside my-2">$&</ul>'),t=t.replace(/^\d+\.\s+(.+)$/gm,'<li class="ml-4">$1</li>'),t=t.replace(/^- \[x\]\s+(.+)$/gm,'<li class="ml-4 flex items-center gap-2"><input type="checkbox" checked disabled class="rounded text-indigo-500"><span class="line-through text-gray-500">$1</span></li>'),t=t.replace(/^- \[ \]\s+(.+)$/gm,'<li class="ml-4 flex items-center gap-2"><input type="checkbox" disabled class="rounded"><span>$1</span></li>'),t=t.replace(/\[([^\]]+)\]\(([^)]+)\)/g,'<a href="$2" target="_blank" rel="noopener noreferrer" class="text-indigo-600 dark:text-indigo-400 hover:underline">$1</a>'),t=t.replace(new RegExp('(?<!href="|src=")(https?:\\/\\/[^\\s<]+)',"g"),'<a href="$1" target="_blank" rel="noopener noreferrer" class="text-indigo-600 dark:text-indigo-400 hover:underline">$1</a>'),t=Ot(t),t=t.replace(/<details>\s*<summary>([^<]+)<\/summary>([\s\S]*?)<\/details>/g,`<details class="my-2 border border-gray-200 dark:border-gray-700 rounded-lg">
      <summary class="px-3 py-2 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 font-medium">$1</summary>
      <div class="px-3 py-2 border-t border-gray-200 dark:border-gray-700">$2</div>
    </details>`),t=t.replace(/\n\n/g,'</p><p class="my-2">'),t=t.replace(/\n/g,"<br>"),t.startsWith("<")||(t=`<p class="my-2">${t}</p>`),t}function Ot(e){const r=/\|(.+)\|\n\|[-:\s|]+\|\n((?:\|.+\|\n?)+)/g;return e.replace(r,(t,n,s)=>{const o=n.split("|").filter(u=>u.trim()),i=s.trim().split(`
`).map(u=>u.split("|").filter(c=>c.trim())),l=o.map(u=>`<th class="px-3 py-2 text-left font-semibold">${u.trim()}</th>`).join(""),d=i.map(u=>`<tr class="border-t border-gray-200 dark:border-gray-700">${u.map(c=>`<td class="px-3 py-2">${c.trim()}</td>`).join("")}</tr>`).join("");return`<table class="w-full my-3 border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden">
      <thead class="bg-gray-50 dark:bg-gray-800">
        <tr>${l}</tr>
      </thead>
      <tbody>${d}</tbody>
    </table>`})}function Ce(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function zt(e){const r=[];let t=e.replace(/```(\w+)?\n([\s\S]*?)```/g,(n,s,o)=>{const i=s?Ce(s):"",l=Ce(o),d=`\`\`\`${i}
${l}\`\`\``;return r.push(d),`__CODE_BLOCK_${r.length-1}__`});return t=t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),r.forEach((n,s)=>{t=t.replace(`__CODE_BLOCK_${s}__`,n)}),t}function Wt(e){const r=e.input;return r?r.file_path?String(r.file_path).split("/").pop()||e.name:r.pattern?String(r.pattern).slice(0,30):r.command?String(r.command).slice(0,40):r.query?String(r.query).slice(0,30):r.url?String(r.url).slice(0,40):e.name:e.name}function P({tool:e,agent:r,className:t=""}){return r?React.createElement("div",{className:`chat-agent-indicator ${t}`},React.createElement("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})),React.createElement("span",{className:"font-medium"},"Task"),React.createElement("span",{className:"text-gray-400 truncate max-w-[200px]"},r.description)):e?React.createElement("div",{className:`chat-tool-indicator ${t}`},React.createElement("svg",{className:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})),React.createElement("span",{className:"font-medium"},e.name),React.createElement("span",{className:"text-gray-400 truncate max-w-[200px]"},Wt(e))):null}function Me(e){return e.toLocaleTimeString("it-IT",{hour:"2-digit",minute:"2-digit"})}function _e({message:e,className:r=""}){const t=e.role==="user",n=e.role==="system";return e.segments&&e.segments.length>0?React.createElement("div",{className:`flex flex-col gap-2 ${t?"items-end":"items-start"} ${r}`},e.segments.map((s,o)=>React.createElement(Ut,{key:o,segment:s,isUser:t})),React.createElement("span",{className:"text-xs text-gray-400 mt-1"},Me(e.createdAt))):React.createElement("div",{className:`flex flex-col ${t?"items-end":"items-start"} ${r}`},React.createElement("div",{className:t?"chat-message-user":n?"chat-message-assistant bg-gray-100 dark:bg-gray-700 text-sm":"chat-message-assistant"},React.createElement(q,{content:e.content,role:e.role})),React.createElement("span",{className:"text-xs text-gray-400 mt-1"},Me(e.createdAt)))}function Ut({segment:e,isUser:r}){var t;return e.type==="tool"?React.createElement(P,{tool:{name:e.name||"Tool",id:e.id||"",startedAt:e.completedAt||Date.now(),input:e.input}}):e.type==="agent"?React.createElement(P,{agent:{type:e.agentType||"Task",model:e.model||"",description:e.description||"",startedAt:e.launchedAt||Date.now()}}):(t=e.content)!=null&&t.trim()?React.createElement("div",{className:r?"chat-message-user":"chat-message-assistant"},React.createElement(q,{content:e.content,role:r?"user":"assistant"})):null}function Bt(){return React.createElement("div",{className:"flex items-center gap-1 py-2"},React.createElement("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce-dot animate-bounce-dot-1"}),React.createElement("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce-dot animate-bounce-dot-2"}),React.createElement("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce-dot animate-bounce-dot-3"}))}function Te({content:e,segments:r=[],activeTools:t=[],activeAgents:n=[],className:s=""}){const o=r||[],i=t||[],l=n||[];return!e&&o.every(d=>{var u;return!((u=d.content)!=null&&u.trim())})&&i.length===0?React.createElement("div",{className:`flex items-start ${s}`},React.createElement("div",{className:"chat-message-assistant"},React.createElement(Bt,null))):React.createElement("div",{className:`flex flex-col items-start gap-2 ${s}`},o.map((d,u)=>React.createElement(Ht,{key:u,segment:d,isLast:u===o.length-1})),i.map(d=>React.createElement(P,{key:d.id,tool:d})),l.map((d,u)=>React.createElement(P,{key:`agent-${u}`,agent:d})))}function Ht({segment:e,isLast:r}){var t;return e.type==="tool"?React.createElement(P,{tool:{name:e.name||"Tool",id:e.id||"",startedAt:e.completedAt||Date.now(),input:e.input}}):e.type==="agent"?React.createElement(P,{agent:{type:e.agentType||"Task",model:e.model||"",description:e.description||"",startedAt:e.launchedAt||Date.now()}}):(t=e.content)!=null&&t.trim()?React.createElement("div",{className:"chat-message-assistant"},React.createElement(q,{content:e.content,role:"assistant"}),r&&React.createElement("span",{className:"inline-block w-2 h-4 bg-indigo-500 ml-0.5 animate-blink"})):null}function Ft({cliType:e}){return React.createElement("div",{className:"flex flex-col items-center justify-center h-full py-12 text-gray-400"},React.createElement("div",{className:`w-16 h-16 rounded-full flex items-center justify-center text-2xl font-bold mb-4 ${e==="gemini"?"bg-blue-100 text-blue-600 dark:bg-blue-900 dark:text-blue-400":"bg-orange-100 text-orange-600 dark:bg-orange-900 dark:text-orange-400"}`},e==="gemini"?"G":"C"),React.createElement("p",{className:"text-lg font-medium"},"Start the conversation"),React.createElement("p",{className:"text-sm mt-1"},"Write a message to chat with the AI"))}function te({messages:e,isStreaming:r=!1,streamContent:t="",streamSegments:n=[],activeTools:s=[],activeAgents:o=[],className:i=""}){const l=a.useRef(null),d=a.useRef(null);return a.useEffect(()=>{var u;(u=d.current)==null||u.scrollIntoView({behavior:"smooth"})},[e.length,r]),e.length===0&&!r?React.createElement("div",{className:`flex-1 overflow-y-auto chat-scrollbar ${i}`},React.createElement(Ft,null)):React.createElement("div",{ref:l,className:`flex-1 overflow-y-auto chat-scrollbar p-4 space-y-4 ${i}`},e.map(u=>React.createElement(_e,{key:u.id,message:u,className:"animate-fade-in-up"})),r&&React.createElement(Te,{content:t,segments:n,activeTools:s,activeAgents:o,className:"animate-fade-in-up"}),React.createElement("div",{ref:d}))}function Vt(){return a.createElement("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"}))}function Gt(){return a.createElement("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24"},a.createElement("rect",{x:"6",y:"6",width:"12",height:"12",rx:"2"}))}function qt(){return a.createElement("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"}))}function re({onSend:e,onStop:r,isStreaming:t=!1,pendingMessage:n,onClearPending:s,disabled:o=!1,placeholder:i="Write a message...",className:l=""}){const[d,u]=a.useState(""),c=a.useRef(null),g=a.useCallback(()=>{const h=c.current;h&&(h.style.height="auto",h.style.height=`${Math.min(h.scrollHeight,120)}px`)},[]);a.useEffect(()=>{g()},[d,g]);const f=a.useCallback(()=>{const h=d.trim();!h||o||(e(h),u(""),c.current&&(c.current.style.height="auto"))},[d,o,e]),m=a.useCallback(h=>{h.key==="Enter"&&!h.shiftKey&&!h.ctrlKey&&(h.preventDefault(),f())},[f]),v=d.trim().length>0,y=t&&v,k=t&&!v,p=!t&&v;return a.createElement("div",{className:`border-t border-gray-200 dark:border-gray-700 p-3 ${l}`},n&&a.createElement("div",{className:"mb-2 px-3 py-2 bg-amber-50 dark:bg-amber-900/20 rounded-lg flex items-center justify-between text-sm"},a.createElement("span",{className:"text-amber-700 dark:text-amber-300 truncate"},"Queued: ",n.slice(0,30),"..."),a.createElement("button",{onClick:s,className:"text-amber-600 hover:text-amber-800 dark:text-amber-400"},a.createElement("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})))),a.createElement("div",{className:"flex items-end gap-2"},a.createElement("div",{className:"flex-1 relative"},a.createElement("textarea",{ref:c,value:d,onChange:h=>u(h.target.value),onKeyDown:m,placeholder:t?"Write to queue...":i,disabled:o,className:"chat-input w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:ring-2 focus:ring-indigo-500 focus:border-transparent resize-none",rows:1})),a.createElement("button",{onClick:k?r:f,disabled:o||!p&&!y&&!k,className:`chat-send-button ${k?"chat-send-button-stop":y?"chat-send-button-queue":"chat-send-button-primary"}`},k?a.createElement(Gt,null):y?a.createElement(qt,null):a.createElement(Vt,null))))}function Jt(){return React.createElement("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"}))}function Kt(){return React.createElement("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}))}function Qt(){return React.createElement("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"}))}function Ae({isOpen:e,repositories:r,selectedRepoId:t,isLoading:n=!1,onSelect:s,onClose:o,className:i=""}){const[l,d]=a.useState(""),u=a.useMemo(()=>{if(!l.trim())return r;const g=l.toLowerCase();return r.filter(f=>{var m;return f.name.toLowerCase().includes(g)||((m=f.fullName)==null?void 0:m.toLowerCase().includes(g))})},[r,l]),c=()=>{d(""),o()};return e?React.createElement(React.Fragment,null,React.createElement("div",{className:"fixed inset-0 bg-black/50 z-50",onClick:c}),React.createElement("div",{className:`fixed inset-0 z-50 flex items-center justify-center p-4 ${i}`},React.createElement("div",{className:"bg-white dark:bg-gray-900 rounded-xl shadow-2xl w-full max-w-lg max-h-[80vh] flex flex-col",onClick:g=>g.stopPropagation()},React.createElement("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-200 dark:border-gray-700"},React.createElement("h2",{className:"text-lg font-semibold"},"Select Repository"),React.createElement("button",{onClick:c,className:"p-1 rounded hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors"},React.createElement(Kt,null))),React.createElement("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700"},React.createElement("div",{className:"relative"},React.createElement("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"},React.createElement(Jt,null)),React.createElement("input",{type:"text",value:l,onChange:g=>d(g.target.value),placeholder:"Search repositories...",className:"w-full pl-10 pr-4 py-2 bg-gray-100 dark:bg-gray-800 border border-transparent focus:border-indigo-500 rounded-lg outline-none transition-colors",autoFocus:!0}))),React.createElement("div",{className:"flex-1 overflow-y-auto"},n?React.createElement("div",{className:"flex items-center justify-center py-12"},React.createElement("div",{className:"animate-spin w-8 h-8 border-2 border-indigo-500 border-t-transparent rounded-full"})):u.length===0?React.createElement("div",{className:"text-center py-12 text-gray-500"},l?"No repositories match your search":"No repositories available"):React.createElement("div",{className:"py-2"},u.map(g=>React.createElement("button",{key:g.id,onClick:()=>{s(g.id),c()},className:`w-full px-4 py-3 flex items-center gap-3 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors ${g.id===t?"bg-indigo-50 dark:bg-indigo-900/30":""}`},React.createElement("span",{className:"text-gray-400"},React.createElement(Qt,null)),React.createElement("div",{className:"flex-1 text-left"},React.createElement("div",{className:"font-medium"},g.name),g.fullName&&g.fullName!==g.name&&React.createElement("div",{className:"text-sm text-gray-500"},g.fullName)),g.id===t&&React.createElement("span",{className:"text-indigo-600 dark:text-indigo-400"},React.createElement("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},React.createElement("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})))))))))):null}function Yt(){return React.createElement("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}))}function O(e){return e.toLocaleString()}function Xt(e){return`$${e.toFixed(4)}`}function Zt({value:e,max:r,label:t,color:n="indigo"}){const s=Math.min(100,e/r*100),o={indigo:"bg-indigo-500",green:"bg-green-500",amber:"bg-amber-500",red:"bg-red-500"};return React.createElement("div",null,React.createElement("div",{className:"flex justify-between text-sm mb-1"},React.createElement("span",{className:"text-gray-600 dark:text-gray-400"},t),React.createElement("span",{className:"font-mono"},O(e)," / ",O(r))),React.createElement("div",{className:"h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden"},React.createElement("div",{className:`h-full ${o[n]} transition-all duration-300`,style:{width:`${s}%`}})))}function R({label:e,value:r}){return React.createElement("div",{className:"flex justify-between py-2 border-b border-gray-100 dark:border-gray-800 last:border-0"},React.createElement("span",{className:"text-gray-500 dark:text-gray-400"},e),React.createElement("span",{className:"font-medium"},r))}function De({isOpen:e,session:r,contextInfo:t,usageInfo:n,onClose:s,className:o=""}){if(!e||!r)return null;const i=t?t.tokens.used/t.tokens.limit*100:0,l=i>90?"red":i>70?"amber":"indigo";return React.createElement(React.Fragment,null,React.createElement("div",{className:"fixed inset-0 bg-black/50 z-50",onClick:s}),React.createElement("div",{className:`fixed inset-0 z-50 flex items-center justify-center p-4 ${o}`},React.createElement("div",{className:"bg-white dark:bg-gray-900 rounded-xl shadow-2xl w-full max-w-md",onClick:d=>d.stopPropagation()},React.createElement("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-200 dark:border-gray-700"},React.createElement("h2",{className:"text-lg font-semibold"},"Session Info"),React.createElement("button",{onClick:s,className:"p-1 rounded hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors"},React.createElement(Yt,null))),React.createElement("div",{className:"p-4 space-y-6"},React.createElement("div",null,React.createElement("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-2"},"Session"),React.createElement("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-3"},React.createElement(R,{label:"Name",value:r.displayName||"Untitled"}),React.createElement(R,{label:"CLI Type",value:React.createElement("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${r.cliType==="gemini"?"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300":"bg-orange-100 text-orange-700 dark:bg-orange-900 dark:text-orange-300"}`},r.cliType==="gemini"?"Gemini CLI":"Claude CLI")}),React.createElement(R,{label:"Model",value:r.model||"Not set"}),React.createElement(R,{label:"Messages",value:r.totalMessages}),React.createElement(R,{label:"Created",value:new Date(r.createdAt).toLocaleDateString()}))),t&&React.createElement("div",null,React.createElement("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-2"},"Context Usage"),React.createElement("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-3 space-y-3"},React.createElement(Zt,{value:t.tokens.used,max:t.tokens.limit,label:"Total Tokens",color:l}),t.categories&&t.categories.length>0&&React.createElement("div",{className:"pt-2 border-t border-gray-200 dark:border-gray-700"},React.createElement("div",{className:"text-xs text-gray-500 mb-2"},"By Category"),React.createElement("div",{className:"space-y-1"},t.categories.map(d=>React.createElement("div",{key:d.name,className:"flex justify-between text-sm"},React.createElement("span",{className:"text-gray-600 dark:text-gray-400"},d.name),React.createElement("span",{className:"font-mono text-xs"},O(d.tokens)))))))),n&&React.createElement("div",null,React.createElement("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-2"},"Usage"),React.createElement("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-3"},React.createElement(R,{label:"Input Tokens",value:O(n.inputTokens||0)}),React.createElement(R,{label:"Output Tokens",value:O(n.outputTokens||0)}),n.cacheReadTokens!==void 0&&n.cacheReadTokens>0&&React.createElement(R,{label:"Cache Read",value:O(n.cacheReadTokens)}),n.cacheWriteTokens!==void 0&&n.cacheWriteTokens>0&&React.createElement(R,{label:"Cache Write",value:O(n.cacheWriteTokens)}),n.cost!==void 0&&React.createElement(R,{label:"Cost",value:React.createElement("span",{className:"text-green-600 dark:text-green-400"},Xt(n.cost))})))),React.createElement("div",{className:"px-4 py-3 border-t border-gray-200 dark:border-gray-700 flex justify-end"},React.createElement("button",{onClick:s,className:"px-4 py-2 bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg transition-colors"},"Close")))))}function $t({config:e,globalContext:r,repositories:t=[],className:n="",style:s,onClose:o,onExpand:i}){const l={baseUrl:e.baseUrl,headers:e.headers,getAuthToken:e.getAuthToken,timeout:e.timeout,onUnauthorized:e.onUnauthorized,onError:e.onError};return a.createElement(Se,{config:l},a.createElement("div",{className:`turbowrap-chat turbowrap-chat-${e.defaultMode||"third"} ${n}`.trim(),style:s,"data-theme":e.theme??"auto"},a.createElement(er,{config:e,globalContext:r,repositories:t,onClose:o,onExpand:i})))}function er({config:e,globalContext:r,repositories:t,onClose:n,onExpand:s}){const{store:o,apiClient:i,isInitialized:l,initialize:d}=St(),[u,c]=a.useState(!1),[g,f]=a.useState(!1),[m,v]=a.useState(!1),[y,k]=a.useState(null),[p,h]=a.useState(null),{sendMessage:E,stopStream:C,isConnected:A}=kt({apiUrl:e.baseUrl,workerUrl:e.workerUrl,onAction:(w,N)=>{var M,x,D;w==="navigate"?(M=e.onNavigate)==null||M.call(e,N):w==="highlight"&&((x=e.onHighlight)==null||x.call(e,N)),(D=e.onAction)==null||D.call(e,{type:w,target:N})},onTitleUpdate:(w,N)=>{o.actions.updateSession(w,{displayName:N})},onError:e.onError}),I=o.sessions,b=o.activeSessionId,j=b?I.get(b)??null:null,Ie=b?o.messages.get(b)||[]:[],T=b?o.streamState.get(b)??null:null,ae=a.useMemo(()=>{const w=(r==null?void 0:r.repositoryId)||e.repositoryId;if(w)return t==null?void 0:t.find(N=>N.id===w)},[r==null?void 0:r.repositoryId,e.repositoryId,t]);a.useEffect(()=>{if(l)return;(async()=>{var N;try{const M=(r==null?void 0:r.repositoryId)||e.repositoryId,x=await i.getSessions({repositoryId:M});x.forEach(se=>{o.actions.addSession(se)});const D=await i.getAgents();o.actions.setAgents(D);const z=e.sessionId||(x.length>0?x[0].id:null);if(z){o.actions.setActiveSession(z);const se=await i.getMessages(z);o.actions.setMessages(z,se)}d()}catch(M){(N=e.onError)==null||N.call(e,M instanceof Error?M:new Error("Failed to initialize"))}})()},[l,i,r==null?void 0:r.repositoryId,e.repositoryId,e.sessionId,o.actions,d,e.onError]),a.useEffect(()=>{if(!l)return;(async()=>{var M;const N=r==null?void 0:r.repositoryId;if(N)try{const x=await i.getSessions({repositoryId:N});if(o.actions.reset(),x.forEach(D=>{o.actions.addSession(D)}),x.length>0){o.actions.setActiveSession(x[0].id);const D=await i.getMessages(x[0].id);o.actions.setMessages(x[0].id,D)}d()}catch(x){(M=e.onError)==null||M.call(e,x instanceof Error?x:new Error("Failed to reload"))}})()},[r==null?void 0:r.repositoryId]);const B=a.useCallback(async w=>{var M;o.actions.setActiveSession(w);const N=o.messages.get(w);if(!N||N.length===0)try{const x=await i.getMessages(w);o.actions.setMessages(w,x)}catch(x){(M=e.onError)==null||M.call(e,x instanceof Error?x:new Error("Failed to load messages"))}},[o,i,e.onError]),Le=a.useCallback(async w=>{var N,M;try{const x=await i.createSession({cliType:w,repositoryId:(r==null?void 0:r.repositoryId)||e.repositoryId});o.actions.addSession(x),o.actions.setActiveSession(x.id),(N=e.onSessionCreate)==null||N.call(e,x)}catch(x){(M=e.onError)==null||M.call(e,x instanceof Error?x:new Error("Failed to create session"))}},[i,r==null?void 0:r.repositoryId,e.repositoryId,o.actions,e.onSessionCreate,e.onError]),gr=a.useCallback(w=>{var M;if(!b)return;const N={id:`temp-${Date.now()}`,sessionId:b,role:"user",content:w,createdAt:new Date,isThinking:!1};o.actions.addMessage(b,N),(M=e.onMessageSend)==null||M.call(e,b,w),A&&e.enableSharedWorker!==!1?E(b,w):(i.streamMessage(b,w,{onChunk:x=>{o.actions.appendStreamContent(b,x)},onToolStart:x=>{o.actions.addActiveTool(b,{id:x.id,name:x.name,startedAt:Date.now()})},onToolEnd:x=>{o.actions.removeActiveTool(b,x)},onDone:()=>{o.actions.endStream(b)},onError:x=>{var D;o.actions.endStream(b),(D=e.onError)==null||D.call(e,x)}}),o.actions.startStream(b))},[b,o.actions,e,A,E,i]),fr=a.useCallback(()=>{b&&(C(b),o.actions.abortStream(b))},[b,C,o.actions]),pr=a.useCallback(async w=>{var N,M;try{await i.deleteSession(w),o.actions.removeSession(w),(N=e.onSessionDelete)==null||N.call(e,w)}catch(x){(M=e.onError)==null||M.call(e,x instanceof Error?x:new Error("Failed to delete"))}},[i,o.actions,e.onSessionDelete,e.onError]),hr=a.useCallback(async w=>{var N;if(b)try{await i.updateSession(b,{model:w}),o.actions.updateSession(b,{model:w})}catch(M){(N=e.onError)==null||N.call(e,M instanceof Error?M:new Error("Failed to update model"))}},[b,i,o.actions,e.onError]),yr=a.useCallback(async w=>{var N;if(b)try{await i.changeBranch(b,w),o.actions.updateSession(b,{currentBranch:w})}catch(M){(N=e.onError)==null||N.call(e,M instanceof Error?M:new Error("Failed to change branch"))}},[b,i,o.actions,e.onError]),br=a.useCallback(async()=>{var w;if(b)try{const[N,M]=await Promise.all([i.getContextInfo(b),i.getUsageInfo(b)]);k(N),h({inputTokens:M.sessionId?void 0:0,outputTokens:void 0,cacheReadTokens:void 0,cost:void 0,mcpServers:M.mcpServers}),v(!0)}catch(N){(w=e.onError)==null||w.call(e,N instanceof Error?N:new Error("Failed to load session info"))}},[b,i,e.onError]),vr=a.useCallback(w=>{window.dispatchEvent(new CustomEvent("turbowrap:repo-change",{detail:{repositoryId:w}})),f(!1)},[]),je=a.useMemo(()=>Array.from(I.values()).sort((w,N)=>{var D,z;const M=((D=w.lastMessageAt)==null?void 0:D.getTime())||w.createdAt.getTime();return(((z=N.lastMessageAt)==null?void 0:z.getTime())||N.createdAt.getTime())-M}),[I]);return a.createElement("div",{className:"flex flex-col h-full bg-white dark:bg-gray-900"},a.createElement(ke,{chatMode:e.defaultMode||"third",showHistory:u,onToggleHistory:()=>c(!u),onNewChat:Le,onExpand:s,onClose:n},a.createElement(we,{sessions:je,activeSessionId:b??null,onSelect:B})),j&&a.createElement(Ne,{session:j,repository:ae,branches:(r==null?void 0:r.branches)||[],currentBranch:(r==null?void 0:r.currentBranch)||j.currentBranch||"main",onModelChange:hr,onRepoClick:()=>f(!0),onBranchChange:yr,onInfoClick:br}),a.createElement(te,{messages:Ie,isStreaming:(T==null?void 0:T.isStreaming)||!1,streamContent:(T==null?void 0:T.content)||"",streamSegments:(T==null?void 0:T.segments)||[],activeTools:(T==null?void 0:T.activeTools)||[],activeAgents:(T==null?void 0:T.activeAgents)||[],className:"flex-1"}),a.createElement(re,{onSend:gr,onStop:fr,isStreaming:(T==null?void 0:T.isStreaming)||!1,placeholder:`Message ${(j==null?void 0:j.cliType)==="gemini"?"Gemini":"Claude"}...`}),a.createElement(xe,{isOpen:u,sessions:je,activeSessionId:b??null,onClose:()=>c(!1),onSelect:w=>{B(w),c(!1)},onDelete:pr,onNewChat:Le}),a.createElement(Ae,{isOpen:g,repositories:t||[],selectedRepoId:(r==null?void 0:r.repositoryId)||e.repositoryId||null,onSelect:vr,onClose:()=>f(!1)}),a.createElement(De,{isOpen:m,session:j,contextInfo:y||void 0,usageInfo:p||void 0,onClose:()=>v(!1)}))}function ne(){const e=H(),r=a.useRef(new Map),{startStream:t,appendStreamContent:n,addStreamSegment:s,endStream:o,abortStream:i,setStreamError:l,addActiveTool:d,removeActiveTool:u,addActiveAgent:c,addMessage:g,updateSession:f,setPendingMessage:m}=_(p=>p.actions),v=a.useCallback(async(p,h,E)=>{const C=_.getState().streamState.get(p);if(C!=null&&C.isStreaming){m(p,h);return}const A=new AbortController;r.current.set(p,A),t(p);const I={id:`temp-user-${Date.now()}`,sessionId:p,role:"user",content:h,isThinking:!1,createdAt:new Date};g(p,I);try{await e.streamMessage(p,h,{signal:A.signal,modelOverride:E,onChunk:(b,j)=>{n(p,b,j)},onThinking:b=>{n(p,b)},onToolStart:b=>{d(p,b),s(p,{type:"tool",name:b.name,id:b.id})},onToolEnd:(b,j)=>{u(p,b,j)},onAgentStart:b=>{c(p,b),s(p,{type:"agent",agentType:b.type,model:b.model,description:b.description})},onDone:(b,j)=>{const T=_.getState().streamState.get(p),ae={id:b,sessionId:p,role:"assistant",content:(T==null?void 0:T.content)||"",segments:T==null?void 0:T.segments,isThinking:!1,createdAt:new Date};o(p,ae);const B=T==null?void 0:T.pendingMessage;B&&(m(p,null),setTimeout(()=>v(p,B),100))},onTitleUpdate:b=>{f(p,{displayName:b})},onError:b=>{l(p,b.message)}})}catch(b){b instanceof Error&&b.name==="AbortError"?i(p):l(p,b instanceof Error?b.message:"Unknown error")}finally{r.current.delete(p)}},[e,t,n,s,o,i,l,d,u,c,g,f,m]),y=a.useCallback(p=>{const h=r.current.get(p);h&&(h.abort(),r.current.delete(p))},[]),k=a.useCallback(p=>{var h;return((h=_.getState().streamState.get(p))==null?void 0:h.isStreaming)??!1},[]);return a.useEffect(()=>()=>{r.current.forEach(p=>{p.abort()}),r.current.clear()},[]),{sendMessage:v,abort:y,isStreaming:k}}function tr(e={}){const{sessionId:r}=e,t=_(G),n=r||(t==null?void 0:t.id),s=_(Z),o=r?_(y=>y.messages.get(r)??[]):s,i=_($),l=r?_(y=>y.streamState.get(r)):i,{setPendingMessage:d,setStreamError:u}=_(y=>y.actions),c=ne(),g=a.useCallback(async(y,k)=>{if(!n)throw new Error("No session selected");if(l!=null&&l.isStreaming){d(n,y);return}await c.sendMessage(n,y,k)},[n,l==null?void 0:l.isStreaming,d,c]),f=a.useCallback(()=>{n&&c.abort(n)},[n,c]),m=a.useCallback(y=>{n&&d(n,y)},[n,d]),v=a.useCallback(()=>{n&&u(n,null)},[n,u]);return{messages:o,isStreaming:(l==null?void 0:l.isStreaming)??!1,streamContent:(l==null?void 0:l.content)??"",streamSegments:(l==null?void 0:l.segments)??[],activeTools:(l==null?void 0:l.activeTools)??[],activeAgents:(l==null?void 0:l.activeAgents)??[],error:(l==null?void 0:l.error)??null,pendingMessage:(l==null?void 0:l.pendingMessage)??null,sendMessage:g,stopStream:f,queueMessage:m,clearError:v}}function rr(){const e=H(),r=ne(),[t,n]=a.useState(!1),s=_(be),o=_(G),i=_(X),{addSession:l,updateSession:d,removeSession:u,setActiveSession:c,setMessages:g,setSessions:f}=_(C=>C.actions),m=a.useCallback(async C=>{n(!0);try{const A=await e.createSession(C);return l(A),await e.startSession(A.id),c(A.id),A}finally{n(!1)}},[e,l,c]),v=a.useCallback(async C=>{n(!0);try{const A=_.getState().activeSessionId;A&&r.isStreaming(A)&&r.abort(A),c(C);const I=_.getState().messages.get(C);if(!I||I.length===0){const b=await e.getMessages(C);g(C,b)}await e.startSession(C)}finally{n(!1)}},[e,r,c,g]),y=a.useCallback(async(C,A)=>{const I=await e.updateSession(C,A);return d(C,I),I},[e,d]),k=a.useCallback(async C=>{await e.deleteSession(C),u(C)},[e,u]),p=a.useCallback(async C=>{n(!0);try{const A=await e.forkSession(C);l(A);const I=await e.getMessages(A.id);return g(A.id,I),A}finally{n(!1)}},[e,l,g]),h=a.useCallback(async C=>{await e.startSession(C)},[e]),E=a.useCallback(async()=>{n(!0);try{const C=await e.getSessions();f(C)}finally{n(!1)}},[e,f]);return{sessions:s,activeSession:o,secondarySession:i,isLoading:t,createSession:m,selectSession:v,updateSession:y,deleteSession:k,forkSession:p,startSession:h,refreshSessions:E}}function nr(){const e=H(),r=_(ve),{setAgents:t}=_(y=>y.actions),[n,s]=a.useState(""),[o,i]=a.useState(0),[l,d]=a.useState(!1),u=a.useMemo(()=>{if(!n)return r.slice(0,10);const y=n.toLowerCase();return r.filter(k=>k.name.toLowerCase().includes(y)||k.description.toLowerCase().includes(y)).slice(0,10)},[r,n]);a.useEffect(()=>{i(0)},[n]);const c=a.useCallback(()=>{i(y=>y>0?y-1:u.length-1)},[u.length]),g=a.useCallback(()=>{i(y=>y<u.length-1?y+1:0)},[u.length]),f=a.useCallback(()=>u[o]??null,[u,o]),m=a.useCallback(()=>{s(""),i(0)},[]),v=a.useCallback(async()=>{d(!0);try{const y=await e.getAgents();t(y)}finally{d(!1)}},[e,t]);return{agents:r,filteredAgents:u,query:n,selectedIndex:o,isLoading:l,setQuery:s,selectPrevious:c,selectNext:g,getSelectedAgent:f,resetSelection:m,refreshAgents:v}}function ar(){const e=_(h=>h.dualChatEnabled),r=_(vt),t=_(Et),n=_(G),s=_(Z),o=_($),i=_(X),l=_(ht),d=_(yt),{toggleDualChat:u,setSecondarySession:c,setActivePane:g,setActiveSession:f}=_(h=>h.actions),m=a.useCallback(()=>{u()},[u]),v=a.useCallback(h=>{c(h)},[c]),y=a.useCallback(h=>{g(h)},[g]),k=a.useCallback(()=>{const h=_.getState(),E=h.activeSessionId,C=h.secondarySessionId;E&&C&&(f(C),c(E))},[f,c]),p=a.useCallback((h,E)=>{E==="left"?f(h):c(h),g(E)},[f,c,g]);return{isDualChatEnabled:e,isDualChatActive:r,activePane:t,leftSession:n,leftMessages:s,leftStreamState:o,rightSession:i,rightMessages:l,rightStreamState:d,toggleDualChat:m,setSecondarySession:v,setActivePane:y,swapSessions:k,openInPane:p}}function sr({session:e,messages:r,isStreaming:t=!1,streamContent:n="",streamSegments:s=[],activeTools:o=[],activeAgents:i=[],pendingMessage:l,isActive:d=!0,onSend:u,onStop:c,onClearPending:g,onFocus:f,className:m=""}){const v=a.useCallback(()=>{f==null||f()},[f]);return e?React.createElement("div",{onClick:v,className:`flex flex-col h-full ${d?"ring-2 ring-indigo-500 ring-opacity-50":""} ${m}`},React.createElement("div",{className:"px-4 py-2 border-b border-gray-200 dark:border-gray-700 flex items-center gap-2"},React.createElement("div",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold ${e.cliType==="gemini"?"bg-blue-100 text-blue-600 dark:bg-blue-900 dark:text-blue-400":"bg-orange-100 text-orange-600 dark:bg-orange-900 dark:text-orange-400"}`},e.cliType==="gemini"?"G":"C"),React.createElement("span",{className:"font-medium truncate flex-1"},e.displayName||"Untitled Chat"),e.model&&React.createElement("span",{className:"text-xs text-gray-400"},or(e.model))),React.createElement(te,{messages:r,isStreaming:t,streamContent:n,streamSegments:s,activeTools:o,activeAgents:i,className:"flex-1"}),React.createElement(re,{onSend:u,onStop:c,isStreaming:t,pendingMessage:l,onClearPending:g,placeholder:`Message ${e.cliType==="gemini"?"Gemini":"Claude"}...`})):React.createElement("div",{className:`flex flex-col h-full ${m}`},React.createElement("div",{className:"flex-1 flex items-center justify-center text-gray-400"},React.createElement("div",{className:"text-center"},React.createElement("svg",{className:"w-12 h-12 mx-auto mb-4 opacity-50",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})),React.createElement("p",{className:"font-medium"},"Select a chat"),React.createElement("p",{className:"text-sm mt-1"},"Choose a session from the tabs above"))))}function or(e){return e.includes("opus")?"Opus":e.includes("sonnet")?"Sonnet":e.includes("haiku")?"Haiku":e.includes("pro")?"Pro":e.includes("flash")?"Flash":e.split("-").pop()||e}function ir({enabled:e,children:r,className:t=""}){const n=a.Children.toArray(r);return!e||n.length<2?a.createElement("div",{className:`flex-1 flex flex-col ${t}`},n[0]):a.createElement("div",{className:`flex-1 flex ${t}`},a.createElement("div",{className:"flex-1 flex flex-col border-r border-gray-200 dark:border-gray-700"},n[0]),a.createElement("div",{className:"flex-1 flex flex-col"},n[1]))}function lr({code:e,language:r="text",className:t=""}){const[n,s]=a.useState(!1),o=a.useCallback(async()=>{try{await navigator.clipboard.writeText(e),s(!0),setTimeout(()=>s(!1),2e3)}catch(i){console.error("Failed to copy:",i)}},[e]);return React.createElement("div",{className:`chat-code-block ${t}`},React.createElement("div",{className:"chat-code-header"},React.createElement("span",{className:"text-gray-400"},r),React.createElement("button",{onClick:o,className:"text-xs text-gray-400 hover:text-white transition-colors"},n?"Copied!":"Copy")),React.createElement("pre",{className:"chat-code-content overflow-x-auto"},React.createElement("code",{className:`language-${r}`},e)))}const cr={info:"üí°",warning:"‚ö†Ô∏è",error:"‚ùå",success:"‚úÖ",tip:"üí°"};function dr({type:e,children:r,className:t=""}){return a.createElement("div",{className:`chat-callout chat-callout-${e} ${t}`},a.createElement("span",{className:"mr-2 flex-shrink-0"},cr[e]),a.createElement("div",{className:"flex-1"},r))}function ur(e){switch(e){case"reviewer":return"üîç";case"fixer":return"üîß";case"analyzer":return"üìä";case"creator":return"‚ú®";default:return"ü§ñ"}}function mr({isOpen:e,agents:r,filter:t,selectedIndex:n,position:s,onSelect:o,onClose:i,onNavigate:l,className:d=""}){const u=a.useRef(null),c=a.useRef(null),g=r.filter(m=>m.name.toLowerCase().includes(t.toLowerCase())||m.description.toLowerCase().includes(t.toLowerCase()));a.useEffect(()=>{c.current&&c.current.scrollIntoView({block:"nearest"})},[n]);const f=a.useCallback(m=>{if(e)switch(m.key){case"ArrowDown":m.preventDefault(),l("down");break;case"ArrowUp":m.preventDefault(),l("up");break;case"Enter":m.preventDefault(),g[n]&&o(g[n]);break;case"Escape":m.preventDefault(),i();break}},[e,g,n,o,i,l]);return a.useEffect(()=>(document.addEventListener("keydown",f),()=>document.removeEventListener("keydown",f)),[f]),a.useEffect(()=>{const m=v=>{u.current&&!u.current.contains(v.target)&&i()};if(e)return document.addEventListener("mousedown",m),()=>document.removeEventListener("mousedown",m)},[e,i]),!e||g.length===0?null:React.createElement("div",{ref:u,className:`absolute bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg z-50 max-h-64 overflow-y-auto min-w-[280px] ${d}`,style:{bottom:`calc(100% - ${s.top}px + 8px)`,left:s.left}},React.createElement("div",{className:"px-3 py-2 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 rounded-t-lg"},React.createElement("span",{className:"text-xs text-gray-500 font-medium"},"Agents ",t&&`matching "${t}"`)),React.createElement("div",{className:"py-1"},g.map((m,v)=>React.createElement("button",{key:m.id,ref:v===n?c:void 0,onClick:()=>o(m),className:`w-full px-3 py-2 text-left flex items-start gap-3 transition-colors ${v===n?"bg-indigo-50 dark:bg-indigo-900/30":"hover:bg-gray-100 dark:hover:bg-gray-700"}`},React.createElement("span",{className:"text-lg flex-shrink-0"},ur(m.type)),React.createElement("div",{className:"flex-1 min-w-0"},React.createElement("div",{className:"flex items-center gap-2"},React.createElement("span",{className:"font-medium text-gray-900 dark:text-white"},"@",m.name),m.model&&React.createElement("span",{className:"text-xs px-1.5 py-0.5 bg-gray-100 dark:bg-gray-700 rounded text-gray-500"},m.model)),React.createElement("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate"},m.description))))),React.createElement("div",{className:"px-3 py-1.5 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 rounded-b-lg"},React.createElement("span",{className:"text-xs text-gray-400"},"‚Üë‚Üì navigate ¬∑ Enter select ¬∑ Esc close")))}S.AgentAutocomplete=mr,S.Callout=dr,S.ChatAPIClient=le,S.ChatHeader=ke,S.ChatPane=sr,S.ChatProvider=Se,S.ChatWidget=$t,S.CodeBlock=lr,S.DualPaneLayout=ir,S.HistoryPanel=xe,S.MessageFormatter=q,S.MessageInput=re,S.MessageItem=_e,S.MessageList=te,S.QuickSettings=Ne,S.RepoSelectorModal=Ae,S.SessionInfoModal=De,S.SessionTabs=we,S.StreamingMessage=Te,S.ToolIndicator=P,S.createInitialStreamState=W,S.selectActiveMessages=Z,S.selectActiveSession=G,S.selectActiveStreamState=$,S.selectAgents=ve,S.selectAllSessions=be,S.selectIsSessionStreaming=bt,S.selectSecondarySession=X,S.transformMessage=oe,S.transformSession=L,S.useAgents=nr,S.useChat=tr,S.useChatClient=H,S.useChatStore=_,S.useDualChat=ar,S.useSessions=rr,S.useStreaming=ne,Object.defineProperty(S,Symbol.toStringTag,{value:"Module"})});
//# sourceMappingURL=turbowrap-chat.umd.js.map
