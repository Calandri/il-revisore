<div class="flex gap-3 {% if msg.role == 'user' %}flex-row-reverse{% endif %} message-enter">
    <!-- Avatar -->
    <div class="w-8 h-8 rounded-full flex items-center justify-center text-white text-sm shrink-0
                {% if msg.role == 'user' %}bg-blue-500{% else %}bg-purple-500{% endif %}">
        {% if msg.role == 'user' %}U{% else %}AI{% endif %}
    </div>

    <!-- Message bubble -->
    <div class="max-w-[80%] rounded-2xl px-4 py-3
                {% if msg.role == 'user' %}
                    bg-primary text-white rounded-tr-sm
                {% else %}
                    bg-gray-100 dark:bg-gray-700 rounded-tl-sm
                {% endif %}">
        <div class="prose dark:prose-invert prose-sm max-w-none whitespace-pre-wrap">{{ msg.content }}</div>
        {% if msg.created_at %}
        <div class="text-xs mt-1 {% if msg.role == 'user' %}text-white/70{% else %}text-gray-400{% endif %}">
            {{ msg.created_at.strftime('%H:%M') }}
        </div>
        {% endif %}
    </div>
</div>
