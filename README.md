# TurboWrap

Code repository analyzer powered by AI agents.

## Agents

| Agent | Model | Purpose |
|-------|-------|---------|
| Flash Analyzer | Gemini Flash | Fast repository structure analysis |
| Code Reviewer | Claude Opus | Deep code review (1 agent per 3 files) |
| Tree Generator | Gemini Flash | Documentation tree (STRUCTURE.md) |

## Installation

```bash
pip install google-genai anthropic
```

## Setup

Set your API keys:

```bash
# For Gemini Flash (repo analysis + tree)
export GOOGLE_API_KEY="your-gemini-key"

# For Claude Opus (code review)
export ANTHROPIC_API_KEY="your-anthropic-key"
```

Get your API keys:
- Gemini: [Google AI Studio](https://aistudio.google.com/app/apikey)
- Claude: [Anthropic Console](https://console.anthropic.com/)

## Usage

```bash
# Analyze a repository
python turbowrap.py /path/to/repo

# Custom output directory
python turbowrap.py /path/to/repo --output ./my-reviews

# More parallel workers (for faster review)
python turbowrap.py /path/to/repo --max-workers 5

# Skip repo analysis (only code review with Claude)
python turbowrap.py /path/to/repo --skip-flash

# Skip code review (only analyze structure with Gemini)
python turbowrap.py /path/to/repo --skip-review

# Generate documentation tree (STRUCTURE.md in each folder)
python turbowrap.py /path/to/repo --tree

# Tree with custom depth (default: 3 levels)
python turbowrap.py /path/to/repo --tree --tree-depth 2
```

## Output

Results are saved to `<repo>/.reviews/`:

| File | Generated By | Content |
|------|--------------|---------|
| `REPO_DESCRIPTION.md` | Gemini Flash | Repository overview and structure |
| `REVIEW_TODO.md` | Claude Opus | Issues and action items checklist |

With `--tree` flag, `STRUCTURE.md` files are generated in each folder (up to 3 levels):

```
src/
  STRUCTURE.md  → links to subdirectories
  components/
    STRUCTURE.md  → lists Components, Hooks, Utils
    charts/
      STRUCTURE.md  → detailed file contents
```

Each `STRUCTURE.md` contains:
- **Files**: List of files with extracted elements (Components, Hooks, Functions, Classes)
- **Subdirectories**: Links to nested STRUCTURE.md files

## Agent Instructions

Customize agent behavior by editing the markdown files in `agents/`:

- `flash_analyzer.md` - Repository analysis instructions (Gemini)
- `reviewer_be.md` - Python/Backend review criteria (Claude)
- `reviewer_fe.md` - React/Frontend review criteria (Claude)

## Architecture

```
┌─────────────────────────────────────────────────────────────┐
│                        TurboWrap                            │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ┌─────────────────┐     ┌─────────────────────────────┐   │
│  │  Gemini Flash   │     │       Claude Opus           │   │
│  │  (Fast Analysis)│     │     (Deep Review)           │   │
│  └────────┬────────┘     └──────────────┬──────────────┘   │
│           │                             │                   │
│           ▼                             ▼                   │
│  ┌─────────────────┐     ┌─────────────────────────────┐   │
│  │ REPO_DESC.md    │     │  1 Agent per 3 files        │   │
│  │ - Overview      │     │  ┌─────┐ ┌─────┐ ┌─────┐    │   │
│  │ - Tech Stack    │     │  │ BE  │ │ BE  │ │ FE  │    │   │
│  │ - Structure     │     │  │Agent│ │Agent│ │Agent│    │   │
│  └─────────────────┘     │  └──┬──┘ └──┬──┘ └──┬──┘    │   │
│           │              │     │       │       │        │   │
│           ▼              │     ▼       ▼       ▼        │   │
│  ┌─────────────────┐     │  ┌─────────────────────┐     │   │
│  │ STRUCTURE.md    │     │  │   REVIEW_TODO.md    │     │   │
│  │ (--tree flag)   │     │  │   - Issues          │     │   │
│  │ - Components    │     │  │   - Action Items    │     │   │
│  │ - Functions     │     │  └─────────────────────┘     │   │
│  │ - Hooks         │     └─────────────────────────────┘   │
│  └─────────────────┘                                       │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

## License

MIT
